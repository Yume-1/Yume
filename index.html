<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YUME - Social Media with Earning</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
    --primary-color: #fe2c55; /* TikTok's signature pink/red */
    --primary-light: #ff5777;
    --primary-dark: #d91a4c;
    --secondary-color: #25f4ee; /* TikTok's teal accent */
    --accent-color: #ffd600; /* TikTok's yellow accent */
    --text-color: #ffffff;
    --bg-color: #000000;
    --card-bg: #121212;
    --border-color: #2a2a2a;
    --success-color: #4caf50;
    --error-color: #fe2c55;
    --warning-color: #ff9800;
    --shadow: 0 2px 10px rgba(0,0,0,0.5);
    --transition: all 0.3s ease;
    --gradient: linear-gradient(135deg, #fe2c55 0%, #25f4ee 100%);
    --earn-gradient: linear-gradient(135deg, #ffd700, #ff9500);
}

[data-theme="light"] {
    --text-color: #000000;
    --bg-color: #ffffff;
    --card-bg: #f8f8f8;
    --border-color: #e0e0e0;
    --shadow: 0 2px 10px rgba(0,0,0,0.08);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
    padding-bottom: 60px;
    overflow-x: hidden;
}

a {
    text-decoration: none;
    color: var(--primary-color);
}

button {
    cursor: pointer;
    border: none;
    background: none;
    font-family: inherit;
}

.container {
    width: 100%;
    max-width: 100%;
    padding: 0;
}

/* Header - TikTok style */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: transparent;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
    transition: var(--transition);
}

.header.scrolled {
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
}

.logo {
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--text-color);
    display: flex;
    align-items: center;
}

.logo::before {
    content: "";
    display: inline-block;
    width: 24px;
    height: 24px;
    background: var(--gradient);
    border-radius: 6px;
    margin-right: 8px;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 15px;
}

.theme-toggle, .search-toggle {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    color: var(--text-color);
}

.yume-balance {
    background: var(--primary-color);
    color: white;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 5px;
}

/* TikTok-style Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    z-index: 100;
    border-top: 1px solid var(--border-color);
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.7rem;
    color: var(--text-color);
    position: relative;
    transition: var(--transition);
    padding: 5px;
}

.nav-item.active {
    color: var(--primary-color);
}

.nav-icon {
    font-size: 1.4rem;
    margin-bottom: 4px;
    transition: var(--transition);
}

.nav-item.active .nav-icon {
    transform: scale(1.1);
}

.badge {
    background-color: var(--primary-color);
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 0.7rem;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -5px;
    right: -5px;
}

/* TikTok Video Feed */
.video-feed {
    position: relative;
    height: calc(100vh - 60px);
    overflow-y: auto;
    scroll-snap-type: y mandatory;
}

.video-container {
    position: relative;
    width: 100%;
    height: 100vh;
    scroll-snap-align: start;
    overflow: hidden;
}

.video-player {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.video-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 15px;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    color: white;
    z-index: 10;
}

.video-info {
    margin-bottom: 20px;
}

.video-username {
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 5px;
    display: flex;
    align-items: center;
}

.video-caption {
    font-size: 0.9rem;
    margin-bottom: 10px;
    max-width: 80%;
}

.video-music {
    display: flex;
    align-items: center;
    font-size: 0.8rem;
    color: rgba(255,255,255,0.8);
    margin-bottom: 15px;
}

.video-music i {
    margin-right: 5px;
}

.video-actions {
    position: absolute;
    right: 15px;
    bottom: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.action-circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    transition: var(--transition);
}

.action-circle:hover {
    background-color: rgba(255,255,255,0.2);
}

.action-circle.liked {
    color: var(--primary-color);
}

.action-count {
    font-size: 0.7rem;
    margin-top: 5px;
    text-align: center;
}

/* Profile Avatar */
.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary-color);
}

/* TikTok-style Forms */
.form-input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--card-bg);
    color: var(--text-color);
    font-size: 1rem;
    transition: var(--transition);
}

.form-input:focus {
    outline: none;
    border-color: var(--primary-color);
}

.btn {
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.btn i {
    margin-right: 8px;
}

.btn-primary {
    background-color: var(--primary-color);
    color: white;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-secondary {
    background-color: var(--secondary-color);
    color: black;
}

.btn-secondary:hover {
    background-color: #1de0d9;
}

.btn-outline {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

.btn-outline:hover {
    background-color: rgba(255,255,255,0.1);
}

.btn-block {
    width: 100%;
}

/* Pages */
.page {
    display: none;
    animation: fadeIn 0.3s ease;
}

.page.active {
    display: block;
}

/* Search Page */
.search-container {
    padding: 15px;
    background-color: var(--bg-color);
}

.search-input-container {
    position: relative;
    margin-bottom: 15px;
}

.search-input {
    width: 100%;
    padding: 12px 15px 12px 40px;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    background-color: var(--card-bg);
    color: var(--text-color);
    font-size: 1rem;
}

.search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #888;
}

.search-tabs {
    display: flex;
    overflow-x: auto;
    gap: 15px;
    margin-bottom: 15px;
    padding-bottom: 5px;
}

.search-tab {
    white-space: nowrap;
    padding: 8px 15px;
    border-radius: 20px;
    background-color: var(--card-bg);
    color: var(--text-color);
    font-size: 0.9rem;
    transition: var(--transition);
}

.search-tab.active {
    background-color: var(--primary-color);
    color: white;
}

/* Profile Page */
.profile-header {
    padding: 20px 15px;
    text-align: center;
    position: relative;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
    border: 3px solid var(--primary-color);
}

.profile-stats {
    display: flex;
    justify-content: space-around;
    padding: 15px 0;
    margin-bottom: 15px;
}

.stat {
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    padding: 10px;
    border-radius: 8px;
}

.stat:hover {
    background-color: rgba(255,255,255,0.05);
}

.stat-value {
    font-weight: bold;
    font-size: 1.2rem;
}

.stat-label {
    font-size: 0.8rem;
    color: #888;
}

.profile-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.profile-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 15px;
}

.profile-tab {
    flex: 1;
    text-align: center;
    padding: 15px;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
}

.profile-tab.active {
    color: var(--primary-color);
}

.profile-tab.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 3px;
    background-color: var(--primary-color);
    border-radius: 3px;
}

/* Video Grid */
.video-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
}

.grid-video {
    position: relative;
    aspect-ratio: 9/16;
    overflow: hidden;
}

.grid-video video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.grid-video-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 5px;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    color: white;
    font-size: 0.7rem;
}

/* Messages */
.message-thread {
    height: calc(100vh - 120px);
    overflow-y: auto;
    padding: 10px;
}

.message {
    padding: 10px 15px;
    margin-bottom: 10px;
    border-radius: 18px;
    max-width: 80%;
    word-wrap: break-word;
    position: relative;
    animation: slideIn 0.3s ease;
}

.message.sent {
    background-color: var(--primary-light);
    margin-left: auto;
    border-bottom-right-radius: 4px;
}

.message.received {
    background-color: var(--card-bg);
    margin-right: auto;
    border-bottom-left-radius: 4px;
}

.message-time {
    font-size: 0.7rem;
    color: #888;
    margin-top: 5px;
    text-align: right;
}

.message-input {
    display: flex;
    padding: 10px;
    background-color: var(--card-bg);
    border-top: 1px solid var(--border-color);
    position: fixed;
    bottom: 60px;
    left: 0;
    right: 0;
}

.message-input input {
    flex: 1;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    margin-right: 10px;
    background-color: var(--bg-color);
    color: var(--text-color);
}

/* Create Post */
.create-post {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--bg-color);
    z-index: 1000;
    display: flex;
    flex-direction: column;
}

.create-post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
}

.create-post-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 15px;
}

.post-caption {
    flex: 1;
    background-color: var(--bg-color);
    color: var(--text-color);
    border: none;
    resize: none;
    font-size: 1rem;
    font-family: inherit;
    margin-bottom: 15px;
}

.post-caption:focus {
    outline: none;
}

.post-options {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
}

.post-option {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9rem;
    color: var(--text-color);
}

/* Utilities */
.text-center {
    text-align: center;
}

.mt-1 { margin-top: 10px; }
.mt-2 { margin-top: 20px; }
.mb-1 { margin-bottom: 10px; }
.mb-2 { margin-bottom: 20px; }

/* Loading spinner */
.spinner {
    border: 3px solid var(--border-color);
    border-top: 3px solid var(--primary-color);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Animation keyframes */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes slideIn {
    from { transform: translateX(-10px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* Responsive */
@media (min-width: 768px) {
    .container {
        max-width: 600px;
        margin: 0 auto;
    }
    
    .video-feed {
        max-width: 600px;
        margin: 0 auto;
    }
}

/* Dark mode improvements */
[data-theme="light"] .video-overlay {
    background: linear-gradient(transparent, rgba(255,255,255,0.7));
    color: black;
}

[data-theme="light"] .action-circle {
    background-color: rgba(0,0,0,0.1);
    color: black;
}

[data-theme="light"] .action-circle:hover {
    background-color: rgba(0,0,0,0.2);
}

/* TikTok-style effects */
.pulse {
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Verification badge */
.verified-badge {
    display: inline-flex;
    align-items: center;
    background: var(--primary-color);
    color: white;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 0.6rem;
    margin-left: 5px;
}
            
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <img srec="https://github.com/Yume-1/Yume/blob/main/IMG-20251107-WA0022.jpg"></img><div class="logo">YUME</div>
        <div class="header-actions">
            <button class="search-toggle" id="searchToggle">
                <i class="fas fa-search"></i>
            </button>
            <div class="yume-balance" id="yumeBalance">
                <i class="fas fa-coins"></i>
                <span id="balanceAmount">0</span> $YUME
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <!-- Search Bar -->
    <div class="search-container" id="searchBar" style="display: none;">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" id="globalSearch" placeholder="Search users, posts, or tags...">
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Home/Feed Page -->
        <section id="homePage" class="page active">
            <h2 class="text-center">Your Feed</h2>
            
            <!-- Stories Section -->
            <div class="stories-container" id="storiesContainer">
                <!-- Stories will be loaded here -->
            </div>
            
            <div id="feedContainer">
                <!-- Feed posts will be loaded here -->
            </div>
        </section>

        <!-- Earning Page -->
        <section id="earnPage" class="page">
            <div class="earn-section">
                <h2>Earn $YUME Tokens</h2>
                <p>Complete tasks and engage with content to earn $YUME tokens</p>
                <div class="earn-actions">
                    <button class="earn-btn" id="watchAdBtn">
                        <i class="fas fa-play-circle"></i> Watch Ad
                    </button>
                    <button class="earn-btn" id="inviteFriendBtn">
                        <i class="fas fa-user-plus"></i> Invite Friend
                    </button>
                    <button class="earn-btn" id="dailyRewardBtn">
                        <i class="fas fa-gift"></i> Daily Reward
                    </button>
                </div>
            </div>

            <h3 class="text-center">$YUME Store</h3>
            <div class="yume-store">
                <div class="store-item">
                    <i class="fas fa-gem" style="font-size: 2rem; color: var(--primary-color);"></i>
                    <h4>Premium Badge</h4>
                    <p>Show off with a premium badge</p>
                    <div class="store-price">100 $YUME</div>
                    <button class="btn btn-primary mt-1" style="width: 100%;">Buy</button>
                </div>
                <div class="store-item">
                    <i class="fas fa-palette" style="font-size: 2rem; color: var(--accent-color);"></i>
                    <h4>Custom Theme</h4>
                    <p>Unlock custom profile themes</p>
                    <div class="store-price">200 $YUME</div>
                    <button class="btn btn-primary mt-1" style="width: 100%;">Buy</button>
                </div>
                <div class="store-item">
                    <i class="fas fa-rocket" style="font-size: 2rem; color: var(--secondary-color);"></i>
                    <h4>Boost Post</h4>
                    <p>Get more visibility for your posts</p>
                    <div class="store-price">50 $YUME</div>
                    <button class="btn btn-primary mt-1" style="width: 100%;">Buy</button>
                </div>
                <div class="store-item">
                    <i class="fas fa-crown" style="font-size: 2rem; color: #ffd700;"></i>
                    <h4>VIP Status</h4>
                    <p>Unlock exclusive features</p>
                    <div class="store-price">500 $YUME</div>
                    <button class="btn btn-primary mt-1" style="width: 100%;">Buy</button>
                </div>
            </div>

            <div class="card mt-2">
                <div class="card-header" style="padding: 15px; border-bottom: 1px solid var(--border-color);">
                    <h3>Buy $YUME Tokens</h3>
                </div>
                <div style="padding: 15px;">
                    <p>Purchase $YUME tokens using Stripe</p>
                    <div class="form-group">
                        <label for="yumeAmount">Amount of $YUME:</label>
                        <input type="number" class="form-input" id="yumeAmount" min="100" value="1000">
                        <div class="currency-display" id="currencyDisplay">≈ $0.50 USD</div>
                    </div>
                    <button class="stripe-btn" id="buyYumeBtn">
                        <i class="fas fa-credit-card"></i> Buy with Stripe
                    </button>
                </div>
            </div>
        </section>

        <!-- Messages Page -->
        <section id="messagesPage" class="page">
            <h2 class="text-center">Messages</h2>
            <div id="conversationsContainer">
                <!-- Conversations will be loaded here -->
            </div>
        </section>

        <!-- Chat Page -->
        <section id="chatPage" class="page">
            <div class="chat-header" style="display: flex; align-items: center; padding: 15px; border-bottom: 1px solid var(--border-color);">
                <button id="backToMessages" class="back-btn" style="margin-right: 15px;"><i class="fas fa-arrow-left"></i></button>
                <img src="" alt="" class="avatar" id="chatUserAvatar" style="width: 40px; height: 40px;">
                <h3 id="chatUserName" style="margin-left: 10px;">User Name</h3>
            </div>
            <div class="message-thread" id="messageThread">
                <!-- Messages will be loaded here -->
            </div>
            <div class="message-input">
                <input type="text" id="messageInput" placeholder="Type a message...">
                <button id="sendMessageBtn" class="btn btn-primary"><i class="fas fa-paper-plane"></i></button>
            </div>
        </section>

        <!-- New Post Page -->
        <section id="newPostPage" class="page">
            <h2 class="text-center">Create Post</h2>
            <form id="newPostForm">
                <div class="form-group">
                    <textarea class="form-input form-textarea" id="postContent" placeholder="What's on your mind? (280 characters max)" maxlength="280" required></textarea>
                    <div style="text-align: right; font-size: 0.8rem; margin-top: 5px;">
                        <span id="charCount">0</span>/280
                    </div>
                </div>
                <div class="form-group">
                    <label for="postImage" class="btn btn-outline" style="display: inline-block;">
                        <i class="fas fa-image"></i> Add Image
                    </label>
                    <input type="file" id="postImage" accept="image/*" style="display: none;">
                    <label for="postVideo" class="btn btn-outline" style="display: inline-block; margin-left: 10px;">
                        <i class="fas fa-video"></i> Add Video
                    </label>
                    <input type="file" id="postVideo" accept="video/*" style="display: none;">
                    <div id="mediaPreview" style="margin-top: 10px; display: none;">
                        <img src="" alt="Preview" id="imagePreview" style="max-width: 100%; border-radius: 8px; display: none;">
                        <video controls id="videoPreview" style="max-width: 100%; border-radius: 8px; display: none;"></video>
                        <button type="button" id="removeMedia" class="btn btn-outline" style="margin-top: 10px;">
                            <i class="fas fa-times"></i> Remove Media
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-paper-plane"></i> Post
                </button>
            </form>
        </section>

        <!-- Notifications Page -->
        <section id="notificationsPage" class="page">
            <h2 class="text-center">Notifications</h2>
            <div id="notificationsContainer">
                <!-- Notifications will be loaded here -->
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profilePage" class="page">
            <div class="profile-header">
                <img src="" alt="Profile" class="profile-avatar" id="profileAvatar">
                <h2 id="profileName">Guest User</h2>
                <p id="profileBio">Welcome to YUME! Start sharing your content.</p>
                <div class="profile-share">
                    <button class="share-btn" id="shareProfileBtn">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button class="share-btn" style="background: var(--accent-color);">
                        <i class="fas fa-qrcode"></i>
                    </button>
                    <button class="share-btn" style="background: var(--secondary-color);" id="messageProfileBtn">
                        <i class="fas fa-envelope"></i>
                    </button>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
                    <button class="btn btn-primary" id="editProfileBtn">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                    <button class="btn btn-secondary" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            <div class="profile-stats">
                <div class="stat" id="postsStat">
                    <div class="stat-value" id="postsCount">0</div>
                    <div class="stat-label">Posts</div>
                </div>
                <div class="stat" id="followingStat">
                    <div class="stat-value" id="followingCount">0</div>
                    <div class="stat-label">Following</div>
                </div>
                <div class="stat" id="followersStat">
                    <div class="stat-value" id="followersCount">0</div>
                    <div class="stat-label">Followers</div>
                </div>
                <div class="stat" id="profileViewsStat">
                    <div class="stat-value" id="profileViewsCount">0</div>
                    <div class="stat-label">Profile Views</div>
                </div>
            </div>
            <div id="userPostsContainer">
                <!-- User posts will be loaded here -->
            </div>
        </section>

        <!-- Search Page -->
        <section id="searchPage" class="page">
            <h2 class="text-center">Search</h2>
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Search users by username...">
            </div>
            <div id="searchResults">
                <p class="text-center">Start typing to search for users</p>
            </div>
        </section>

        <!-- Auth Pages -->
        <section id="authPage" class="page">
            <div class="auth-container">
                <div class="auth-tabs">
                    <div class="auth-tab active" data-tab="login">Login</div>
                    <div class="auth-tab" data-tab="register">Register</div>
                </div>
                
                <form id="loginForm" class="auth-form">
                    <div id="loginError" class="error-message" style="display: none;"></div>
                    <div class="form-group">
                        <input type="email" class="form-input" id="loginEmail" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="loginPassword" placeholder="Password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <div class="text-center mt-2">
                        <button type="button" class="btn btn-secondary" id="googleLogin">
                            <i class="fab fa-google"></i> Login with Google
                        </button>
                    </div>
                    <div class="text-center mt-2">
                        <button type="button" id="continueAsGuest" class="btn btn-outline">
                            Continue as Guest
                        </button>
                    </div>
                </form>

                <form id="registerForm" class="auth-form" style="display: none;">
                    <div id="registerError" class="error-message" style="display: none;"></div>
                    <div class="form-group">
                        <input type="text" class="form-input" id="registerName" placeholder="Full Name" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-input" id="registerUsername" placeholder="Username" required>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-input" id="registerEmail" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="registerPassword" placeholder="Password" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="registerConfirmPassword" placeholder="Confirm Password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> Register
                    </button>
                </form>
            </div>
        </section>
    </main>

    <!-- Floating Action Button -->
    <button class="floating-btn" id="newPostFloatBtn">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Enhanced Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="homePage">
            <div class="nav-icon"><i class="fas fa-home"></i></div>
            <span>Home</span>
        </div>
        <div class="nav-item" data-page="earnPage">
            <div class="nav-icon"><i class="fas fa-coins"></i></div>
            <span>Earn</span>
        </div>
        <div class="nav-item" data-page="messagesPage">
            <div class="nav-icon"><i class="fas fa-comments"></i>
                <span class="badge" id="messageBadge" style="display: none;">0</span>
            </div>
            <span>Messages</span>
        </div>
        <div class="nav-item" data-page="notificationsPage">
            <div class="nav-icon"><i class="fas fa-bell"></i>
                <span class="badge" id="notificationBadge" style="display: none;">0</span>
            </div>
            <span>Notifications</span>
        </div>
        <div class="nav-item" data-page="profilePage">
            <div class="nav-icon"><i class="fas fa-user"></i></div>
            <span>Profile</span>
        </div>
    </nav>

    <!-- Edit Profile Modal -->
    <div class="modal-backdrop" id="editProfileModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Profile</h3>
                <button class="close-btn">&times;</button>
            </div>
            <form id="editProfileForm">
                <div class="form-group">
                    <input type="text" class="form-input" id="editDisplayName" placeholder="Display Name" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-input" id="editUsername" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <textarea class="form-input form-textarea" id="editBio" placeholder="Bio"></textarea>
                </div>
                <div class="form-group">
                    <label for="editAvatar" class="btn btn-outline" style="display: inline-block;">
                        <i class="fas fa-camera"></i> Change Avatar
                    </label>
                    <input type="file" id="editAvatar" accept="image/*" style="display: none;">
                    <div id="avatarPreview" style="margin-top: 10px; display: none;">
                        <img src="" alt="Preview" style="max-width: 100px; border-radius: 8px;">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </form>
        </div>
    </div>

    <!-- Comment Modal -->
    <div class="modal-backdrop" id="commentModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Comments</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div id="commentsContainer">
                <!-- Comments will be loaded here -->
            </div>
            <div class="comment-input">
                <input type="text" id="commentInput" placeholder="Write a comment...">
                <button id="postCommentBtn" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Post Options Modal -->
    <div class="modal-backdrop" id="postOptionsModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Post Options</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="options-list">
                <div class="option-item" data-action="save">
                    <i class="fas fa-bookmark"></i> Save Post
                </div>
                <div class="option-item" data-action="share">
                    <i class="fas fa-share"></i> Share Post
                </div>
                <div class="option-item" data-action="repost">
                    <i class="fas fa-retweet"></i> Repost
                </div>
                <div class="option-item" data-action="report">
                    <i class="fas fa-flag"></i> Report Post
                </div>
                <div class="option-item" data-action="delete" style="color: var(--error-color);">
                    <i class="fas fa-trash"></i> Delete Post
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration - REPLACE WITH YOUR ACTUAL VALUES
        const SUPABASE_URL = 'https://your-project.supabase.co'; // Replace with your Supabase URL
        const SUPABASE_ANON_KEY = 'your-anon-key'; // Replace with your Supabase anon key
        
        // Initialize Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // App State
        let currentUser = null;
        let userBalance = 0;
        let currentPage = 'homePage';
        let currentTheme = localStorage.getItem('theme') || 'light';

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        async function initApp() {
            setTheme(currentTheme);
            setupEventListeners();
            await checkAuthStatus();
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.innerHTML = theme === 'light' ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
            }
        }

        function setupEventListeners() {
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', function() {
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                setTheme(newTheme);
                currentTheme = newTheme;
            });

            // Search toggle
            document.getElementById('searchToggle').addEventListener('click', function() {
                const searchBar = document.getElementById('searchBar');
                searchBar.style.display = searchBar.style.display === 'none' ? 'block' : 'none';
            });

            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // Floating action button
            document.getElementById('newPostFloatBtn').addEventListener('click', function() {
                if (!currentUser) {
                    showPage('authPage');
                    return;
                }
                showPage('newPostPage');
            });

            // Auth tabs
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (tabName === 'login') {
                        document.getElementById('loginForm').style.display = 'block';
                        document.getElementById('registerForm').style.display = 'none';
                    } else {
                        document.getElementById('loginForm').style.display = 'none';
                        document.getElementById('registerForm').style.display = 'block';
                    }
                });
            });

            // Login form
            document.getElementById('loginForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                await loginUser(email, password);
            });

            // Register form
            document.getElementById('registerForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const name = document.getElementById('registerName').value;
                const username = document.getElementById('registerUsername').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                if (password !== confirmPassword) {
                    showError('registerError', 'Passwords do not match');
                    return;
                }
                
                await registerUser(name, username, email, password);
            });

            // Google login
            document.getElementById('googleLogin').addEventListener('click', async function() {
                await loginWithGoogle();
            });

            // Continue as guest
            document.getElementById('continueAsGuest').addEventListener('click', function() {
                continueAsGuest();
            });

            // New post form
            document.getElementById('newPostForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const content = document.getElementById('postContent').value;
                await createPost(content);
            });

            // Character count for post content
            document.getElementById('postContent').addEventListener('input', function(e) {
                document.getElementById('charCount').textContent = e.target.value.length;
            });

            // YUME amount input for currency conversion
            document.getElementById('yumeAmount').addEventListener('input', function(e) {
                const yumeAmount = parseInt(e.target.value) || 0;
                const usdAmount = (yumeAmount * 0.0005).toFixed(2);
                document.getElementById('currencyDisplay').textContent = `≈ $${usdAmount} USD`;
            });

            // Back to messages button
            document.getElementById('backToMessages').addEventListener('click', function() {
                showPage('messagesPage');
            });

            // Send message button
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);

            // Message input enter key
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Post comment button
            document.getElementById('postCommentBtn').addEventListener('click', postComment);

            // Comment input enter key
            document.getElementById('commentInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    postComment();
                }
            });

            // Search input
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            document.getElementById('globalSearch').addEventListener('input', handleGlobalSearch);

            // Earning buttons
            document.getElementById('watchAdBtn').addEventListener('click', function() {
                earnYume(5, 'Watched ad');
            });

            document.getElementById('inviteFriendBtn').addEventListener('click', function() {
                earnYume(20, 'Invited friend');
            });

            document.getElementById('dailyRewardBtn').addEventListener('click', function() {
                earnYume(10, 'Daily reward');
            });

            document.getElementById('buyYumeBtn').addEventListener('click', function() {
                buyYumeWithStripe();
            });

            // Edit profile button
            document.getElementById('editProfileBtn').addEventListener('click', function() {
                showEditProfileModal();
            });

            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function() {
                logoutUser();
            });

            // Close modal buttons
            document.querySelectorAll('.close-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.getElementById('editProfileModal').style.display = 'none';
                    document.getElementById('commentModal').style.display = 'none';
                    document.getElementById('postOptionsModal').style.display = 'none';
                });
            });

            // Edit profile form
            document.getElementById('editProfileForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const displayName = document.getElementById('editDisplayName').value;
                const username = document.getElementById('editUsername').value;
                const bio = document.getElementById('editBio').value;
                await updateProfile(displayName, username, bio);
            });
        }

        async function checkAuthStatus() {
            try {
                const { data: { session }, error } = await supabase.auth.getSession();
                
                if (error) {
                    console.error('Error getting session:', error);
                    showPage('authPage');
                    return;
                }

                if (session) {
                    await loadUserProfile(session.user.id);
                    showPage('homePage');
                } else {
                    showPage('authPage');
                }
            } catch (error) {
                console.error('Error checking auth status:', error);
                showPage('authPage');
            }
        }

        async function loadUserProfile(userId) {
            try {
                const { data, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('id', userId)
                    .single();

                if (error) {
                    console.error('Error loading profile:', error);
                    // Create profile if it doesn't exist
                    await createUserProfile(userId);
                    return;
                }

                if (data) {
                    currentUser = data;
                    userBalance = data.yume_balance || 0;
                    updateUI();
                }
            } catch (error) {
                console.error('Error in loadUserProfile:', error);
            }
        }

        async function createUserProfile(userId) {
            try {
                const { data: authUser, error: authError } = await supabase.auth.getUser();
                
                if (authError) throw authError;
                
                const { error } = await supabase
                    .from('profiles')
                    .insert([
                        {
                            id: userId,
                            username: authUser.user.user_metadata.username || `user${userId.substring(0, 8)}`,
                            display_name: authUser.user.user_metadata.display_name || 'New User',
                            email: authUser.user.email,
                            avatar_url: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80',
                            yume_balance: 100,
                            follower_count: 0,
                            following_count: 0,
                            post_count: 0,
                            profile_views: 0,
                            is_verified: false
                        }
                    ]);

                if (error) throw error;
                
                await loadUserProfile(userId);
            } catch (error) {
                console.error('Error creating user profile:', error);
            }
        }

        async function loginUser(email, password) {
            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });

                if (error) {
                    showError('loginError', error.message);
                    return;
                }

                if (data.user) {
                    await loadUserProfile(data.user.id);
                    showPage('homePage');
                    showSuccess('Login successful!');
                }
            } catch (error) {
                console.error('Login error:', error);
                showError('loginError', 'An error occurred during login');
            }
        }

        async function registerUser(name, username, email, password) {
            try {
                // First check if username is available
                const { data: existingUser, error: checkError } = await supabase
                    .from('profiles')
                    .select('id')
                    .eq('username', username)
                    .single();

                if (existingUser) {
                    showError('registerError', 'Username already taken');
                    return;
                }

                // Create auth user
                const { data, error } = await supabase.auth.signUp({
                    email,
                    password,
                    options: {
                        data: {
                            display_name: name,
                            username: username
                        }
                    }
                });

                if (error) {
                    showError('registerError', error.message);
                    return;
                }

                if (data.user) {
                    showSuccess('Registration successful! Please check your email to verify your account.');
                    // Switch to login form
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    document.querySelector('.auth-tab[data-tab="login"]').classList.add('active');
                    document.getElementById('loginForm').style.display = 'block';
                    document.getElementById('registerForm').style.display = 'none';
                }
            } catch (error) {
                console.error('Registration error:', error);
                showError('registerError', 'An error occurred during registration');
            }
        }

        async function loginWithGoogle() {
            try {
                const { data, error } = await supabase.auth.signInWithOAuth({
                    provider: 'google',
                    options: {
                        redirectTo: window.location.origin
                    }
                });
                
                if (error) {
                    console.error('Google login error:', error);
                    showError('loginError', 'Error with Google login');
                }
            } catch (error) {
                console.error('Google login error:', error);
                showError('loginError', 'Error with Google login');
            }
        }

        function continueAsGuest() {
            showPage('homePage');
            showSuccess('Continuing as guest. Some features may be limited.');
        }

        async function logoutUser() {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) {
                    console.error('Logout error:', error);
                }
                
                currentUser = null;
                userBalance = 0;
                showPage('authPage');
                showSuccess('Logged out successfully');
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === pageId) {
                    item.classList.add('active');
                }
            });

            // Load page-specific content
            if (pageId === 'homePage') loadHomePage();
            if (pageId === 'profilePage') loadProfilePage();
            if (pageId === 'earnPage') updateBalanceDisplay();
            if (pageId === 'notificationsPage') loadNotifications();
            if (pageId === 'messagesPage') loadConversations();
            if (pageId === 'searchPage') initSearch();
        }

        function loadHomePage() {
            const feedContainer = document.getElementById('feedContainer');
            
            if (!currentUser) {
                feedContainer.innerHTML = `
                    <div class="card login-prompt">
                        <i class="fas fa-rss"></i>
                        <h3>Login to see your feed</h3>
                        <p>Sign in to view posts from users you follow</p>
                        <button class="btn btn-primary mt-1" onclick="showPage('authPage')">Login</button>
                    </div>
                `;
                return;
            }
            
            feedContainer.innerHTML = `
                <div class="card">
                    <h3>Welcome, ${currentUser.display_name}!</h3>
                    <p>You have ${userBalance} $YUME tokens</p>
                    <p>This is your feed. Posts from users you follow will appear here.</p>
                    <button class="btn btn-primary" style="margin-top: 10px;" onclick="earnYume(10, 'Testing')">
                        Earn 10 YUME (Test)
                    </button>
                </div>
                <div class="card">
                    <h4>Sample Post</h4>
                    <p>This is a sample post. In a real application, you would see posts from users you follow here.</p>
                    <div class="post-actions">
                        <button class="action-btn"><i class="fas fa-heart"></i> 12</button>
                        <button class="action-btn"><i class="fas fa-comment"></i> 3</button>
                        <button class="action-btn"><i class="fas fa-share"></i></button>
                    </div>
                </div>
            `;
        }

        function loadProfilePage() {
            const profileInfo = document.getElementById('profileInfo');
            const userPostsContainer = document.getElementById('userPostsContainer');
            
            if (!currentUser) {
                document.getElementById('profileName').textContent = 'Guest User';
                document.getElementById('profileBio').textContent = 'Welcome to YUME! Start sharing your content.';
                document.getElementById('profileAvatar').src = 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80';
                
                document.getElementById('postsCount').textContent = '0';
                document.getElementById('followingCount').textContent = '0';
                document.getElementById('followersCount').textContent = '0';
                document.getElementById('profileViewsCount').textContent = '0';
                
                userPostsContainer.innerHTML = '<p class="text-center">Please login to view your profile</p>';
                return;
            }
            
            // Update profile info
            document.getElementById('profileName').textContent = currentUser.display_name;
            document.getElementById('profileBio').textContent = currentUser.bio || 'Welcome to YUME! Start sharing your content.';
            document.getElementById('profileAvatar').src = currentUser.avatar_url;
            
            document.getElementById('postsCount').textContent = currentUser.post_count || '0';
            document.getElementById('followingCount').textContent = currentUser.following_count || '0';
            document.getElementById('followersCount').textContent = currentUser.follower_count || '0';
            document.getElementById('profileViewsCount').textContent = currentUser.profile_views || '0';
            
            // Load user posts
            userPostsContainer.innerHTML = `
                <div class="card">
                    <h4>Your Posts</h4>
                    <p>You haven't created any posts yet.</p>
                    <button class="btn btn-primary mt-1" onclick="showPage('newPostPage')">
                        <i class="fas fa-plus"></i> Create Your First Post
                    </button>
                </div>
            `;
        }

        async function createPost(content) {
            if (!currentUser) {
                alert('Please login to create a post');
                showPage('authPage');
                return;
            }
            
            try {
                const { error } = await supabase
                    .from('posts')
                    .insert([
                        {
                            user_id: currentUser.id,
                            content: content
                        }
                    ]);

                if (error) throw error;
                
                // Update user's post count
                await supabase
                    .from('profiles')
                    .update({ post_count: (currentUser.post_count || 0) + 1 })
                    .eq('id', currentUser.id);
                
                // Reset form and go back to feed
                document.getElementById('newPostForm').reset();
                document.getElementById('charCount').textContent = '0';
                showPage('homePage');
                
                // Show success message
                showSuccess('Post created successfully!');
                
                // Earn YUME for creating content
                await earnYume(2, 'Creating a post');
            } catch (error) {
                console.error('Error creating post:', error);
                alert('Error creating post. Please try again.');
            }
        }

        async function earnYume(amount, reason) {
            if (!currentUser) return;
            
            try {
                const newBalance = userBalance + amount;
                
                const { error } = await supabase
                    .from('profiles')
                    .update({ yume_balance: newBalance })
                    .eq('id', currentUser.id);

                if (error) throw error;
                
                userBalance = newBalance;
                currentUser.yume_balance = newBalance;
                updateUI();
                
                showSuccess(`You earned ${amount} $YUME for ${reason}!`);
            } catch (error) {
                console.error('Error earning YUME:', error);
                showError('Error earning YUME');
            }
        }

        function updateUI() {
            // Update balance display
            document.getElementById('balanceAmount').textContent = userBalance;
            
            // Refresh current page
            if (currentPage === 'homePage') loadHomePage();
            if (currentPage === 'profilePage') loadProfilePage();
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                
                setTimeout(() => {
                    errorElement.style.display = 'none';
                }, 5000);
            } else {
                alert(message);
            }
        }

        function showSuccess(message) {
            // Create a temporary success message
            const successElement = document.createElement('div');
            successElement.className = 'success-message';
            successElement.textContent = message;
            successElement.style.position = 'fixed';
            successElement.style.top = '70px';
            successElement.style.left = '50%';
            successElement.style.transform = 'translateX(-50%)';
            successElement.style.zIndex = '1000';
            successElement.style.maxWidth = '90%';
            
            document.body.appendChild(successElement);
            
            setTimeout(() => {
                successElement.remove();
            }, 3000);
        }

        function showEditProfileModal() {
            if (!currentUser) return;
            
            document.getElementById('editDisplayName').value = currentUser.display_name || '';
            document.getElementById('editUsername').value = currentUser.username || '';
            document.getElementById('editBio').value = currentUser.bio || '';
            document.getElementById('editProfileModal').style.display = 'flex';
        }

        async function updateProfile(displayName, username, bio) {
            try {
                // Check if username is available (if changed)
                if (username !== currentUser.username) {
                    const { data: existingUser, error: checkError } = await supabase
                        .from('profiles')
                        .select('id')
                        .eq('username', username)
                        .neq('id', currentUser.id)
                        .single();
                    
                    if (existingUser) {
                        alert('Username already taken');
                        return;
                    }
                }
                
                // Update profile in database
                const { error } = await supabase
                    .from('profiles')
                    .update({
                        display_name: displayName,
                        username: username,
                        bio: bio
                    })
                    .eq('id', currentUser.id);
                
                if (error) throw error;
                
                // Update current user object
                currentUser.display_name = displayName;
                currentUser.username = username;
                currentUser.bio = bio;
                
                // Update UI
                loadProfilePage();
                
                // Close modal
                document.getElementById('editProfileModal').style.display = 'none';
                
                // Show success message
                showSuccess('Profile updated successfully!');
            } catch (error) {
                console.error('Error updating profile:', error);
                alert('Error updating profile. Please try again.');
            }
        }

        function buyYumeWithStripe() {
            alert('Stripe integration would be implemented here. For now, use the "Earn YUME" buttons to test the functionality.');
        }

        function initSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '<p class="text-center">Start typing to search for users</p>';
        }

        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const searchResults = document.getElementById('searchResults');
            
            if (query.length < 2) {
                searchResults.innerHTML = '<p class="text-center">Start typing to search for users</p>';
                return;
            }
            
            // For demo purposes, show some sample results
            searchResults.innerHTML = `
                <div class="card user-item">
                    <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80" alt="User 1" class="avatar">
                    <div style="flex: 1;">
                        <div class="username">User One</div>
                        <div>@user1</div>
                    </div>
                    <button class="btn btn-primary">Follow</button>
                </div>
                <div class="card user-item">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80" alt="User 2" class="avatar">
                    <div style="flex: 1;">
                        <div class="username">User Two</div>
                        <div>@user2</div>
                    </div>
                    <button class="btn btn-primary">Follow</button>
                </div>
            `;
        }

        function handleGlobalSearch() {
            const query = document.getElementById('globalSearch').value.toLowerCase();
            
            if (query.length < 2) {
                return;
            }
            
            if (currentPage !== 'searchPage') {
                showPage('searchPage');
                setTimeout(() => {
                    document.getElementById('searchInput').value = query;
                    handleSearch();
                }, 100);
            } else {
                document.getElementById('searchInput').value = query;
                handleSearch();
            }
        }

        async function loadNotifications() {
            const notificationsContainer = document.getElementById('notificationsContainer');
            
            if (!currentUser) {
                notificationsContainer.innerHTML = '<p class="text-center">Please login to view notifications</p>';
                return;
            }
            
            notificationsContainer.innerHTML = `
                <div class="card notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div>
                        <h4>Welcome to YUME!</h4>
                        <p>Start exploring and earning $YUME tokens</p>
                        <div class="timestamp">Just now</div>
                    </div>
                </div>
            `;
        }

        async function loadConversations() {
            const conversationsContainer = document.getElementById('conversationsContainer');
            
            if (!currentUser) {
                conversationsContainer.innerHTML = '<p class="text-center">Please login to view messages</p>';
                return;
            }
            
            conversationsContainer.innerHTML = `
                <div class="card" style="padding: 15px; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center;">
                        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80" alt="User 1" class="avatar">
                        <div style="flex: 1; margin-left: 10px; cursor: pointer;">
                            <div style="display: flex; justify-content: space-between;">
                                <div class="username">User One</div>
                                <div class="timestamp">2h ago</div>
                            </div>
                            <p>Hey, how are you?</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function sendMessage() {
            if (!currentUser) {
                showPage('authPage');
                return;
            }
            
            const messageInput = document.getElementById('messageInput');
            const content = messageInput.value.trim();
            
            if (!content) return;
            
            // For demo purposes, just add it to the UI
            const messageEl = document.createElement('div');
            messageEl.className = 'message sent';
            messageEl.innerHTML = `
                <div>${content}</div>
                <div class="message-time">Just now</div>
            `;
            
            document.getElementById('messageThread').appendChild(messageEl);
            
            // Clear input
            messageInput.value = '';
            
            // Scroll to bottom
            const messageThread = document.getElementById('messageThread');
            messageThread.scrollTop = messageThread.scrollHeight;
        }

        function postComment() {
            if (!currentUser) {
                showPage('authPage');
                return;
            }
            
            const commentInput = document.getElementById('commentInput');
            const content = commentInput.value.trim();
            
            if (!content) return;
            
            // For demo purposes, just show a success message
            showSuccess('Comment posted!');
            
            // Clear input
            commentInput.value = '';
        }

        // Listen for auth state changes
        supabase.auth.onAuthStateChange(async (event, session) => {
            if (event === 'SIGNED_IN' && session) {
                await loadUserProfile(session.user.id);
                if (currentPage === 'authPage') {
                    showPage('homePage');
                }
            } else if (event === 'SIGNED_OUT') {
                currentUser = null;
                userBalance = 0;
                showPage('authPage');
            }
        });
    </script>
</body>
</html>